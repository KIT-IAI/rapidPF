
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for rapidPF">
      
      
      
        <link rel="canonical" href="https://kit-iai.github.io/rapidPF/problem-formulation/">
      
      
        <meta name="author" content="Tillmann MÃ¼hlpfordt">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.6">
    
    
      
        <title>Problem formulation - rapidPF documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6910b76c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.196e0c26.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#problem-formulation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://kit-iai.github.io/rapidPF/" title="rapidPF documentation" class="md-header-nav__button md-logo" aria-label="rapidPF documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            rapidPF documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Problem formulation
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/KIT-IAI/rapidPF/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://kit-iai.github.io/rapidPF/" title="rapidPF documentation" class="md-nav__button md-logo" aria-label="rapidPF documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    rapidPF documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/KIT-IAI/rapidPF/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      RapidPF
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started/" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../overview/" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../example/" class="md-nav__link">
      Example
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../assumptions/" class="md-nav__link">
      Assumptions
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Problem formulation
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Problem formulation
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core-nodes-copy-nodes" class="md-nav__link">
    Core nodes &amp; copy nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-power-flow-problem" class="md-nav__link">
    Local power flow problem
  </a>
  
    <nav class="md-nav" aria-label="Local power flow problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#power-flow-equations" class="md-nav__link">
    Power flow equations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bus-specifications" class="md-nav__link">
    Bus specifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#degrees-of-freedom" class="md-nav__link">
    Degrees of freedom
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decentralized-power-flow-problem" class="md-nav__link">
    Decentralized power flow problem
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" >
    <label class="md-nav__link" for="nav-8">
      Mfiles
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Mfiles" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        Mfiles
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-1" type="checkbox" id="nav-8-1" >
    <label class="md-nav__link" for="nav-8-1">
      01 generator
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="01 generator" data-md-level="2">
      <label class="md-nav__title" for="nav-8-1">
        <span class="md-nav__icon md-icon"></span>
        01 generator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/01_generator/create_skeleton_mpc/" class="md-nav__link">
      create_skeleton_mpc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/01_generator/merge_systems/" class="md-nav__link">
      merge_systems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/01_generator/run_case_file_generator/" class="md-nav__link">
      run_case_file_generator
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2" >
    <label class="md-nav__link" for="nav-8-2">
      02 splitter
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="02 splitter" data-md-level="2">
      <label class="md-nav__title" for="nav-8-2">
        <span class="md-nav__icon md-icon"></span>
        02 splitter
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/02_splitter/add_consensus_information/" class="md-nav__link">
      add_consensus_information
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/02_splitter/run_case_file_splitter/" class="md-nav__link">
      run_case_file_splitter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/02_splitter/split_case_file/" class="md-nav__link">
      split_case_file
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-3" type="checkbox" id="nav-8-3" >
    <label class="md-nav__link" for="nav-8-3">
      03 parser
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="03 parser" data-md-level="2">
      <label class="md-nav__title" for="nav-8-3">
        <span class="md-nav__icon md-icon"></span>
        03 parser
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/03_parser/build_consensus_constraints/" class="md-nav__link">
      build_consensus_constraints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/03_parser/create_bus_specifications/" class="md-nav__link">
      create_bus_specifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/03_parser/run_ADMM_cplex/" class="md-nav__link">
      run ADMM cplex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/03_parser/solve_distributed_problem_with_admm_cplex/" class="md-nav__link">
      solve_distributed_problem_with_aladin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/03_parser/solve_distributed_problem_with_aladin/" class="md-nav__link">
      solve_distributed_problem_with_aladin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mfiles/03_parser/validate_distributed_problem_formulation/" class="md-nav__link">
      validate_distributed_problem_formulation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../sensitivities/" class="md-nav__link">
      Sensitivities
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core-nodes-copy-nodes" class="md-nav__link">
    Core nodes &amp; copy nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-power-flow-problem" class="md-nav__link">
    Local power flow problem
  </a>
  
    <nav class="md-nav" aria-label="Local power flow problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#power-flow-equations" class="md-nav__link">
    Power flow equations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bus-specifications" class="md-nav__link">
    Bus specifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#degrees-of-freedom" class="md-nav__link">
    Degrees of freedom
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decentralized-power-flow-problem" class="md-nav__link">
    Decentralized power flow problem
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/KIT-IAI/rapidPF/edit/master/docs/problem-formulation.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="problem-formulation">Problem formulation</h1>
<p>Here we present the mathematical formulation of the distributed power
flow problem, which simply reads</p>
<div>
<div class="MathJax_Preview">\begin{aligned}
        g^{\text{pf}}_i( x_i, z_i ) &amp;= 0 \\
        g^{\text{bus}}_i ( x_i ) &amp;= 0 \\
        \sum_{i = 1}^{n^{\text{reg}}} A_i \begin{bmatrix}
            x_i \\
            z_i
        \end{bmatrix}
        &amp;= 0.
    \end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
        g^{\text{pf}}_i( x_i, z_i ) &= 0 \\
        g^{\text{bus}}_i ( x_i ) &= 0 \\
        \sum_{i = 1}^{n^{\text{reg}}} A_i \begin{bmatrix}
            x_i \\
            z_i
        \end{bmatrix}
        &= 0.
    \end{aligned}</script>
</div>
<p>In plain words, the first set of equations satisfies the power flow
equations in each regionÂ <span><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>, the second set of equations accounts for
the bus specifications, and the third set of equations ensures consensus
among the nodes that are shared between regions (will be explained
below).</p>
<p>Its advantage is that its solutionâsupposing it existsâis mathematically
equivalent to the original power flow problem. Instead of often done
splitting of lines we simply copy neighboring buses within regions.</p>
<p>With rapidPF, the distributed power flow problem can be solved in two different problem formulations:</p>
<ul>
<li>as a distributed feasibility problem,</li>
<li>or as a distributed least-squares problem.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">What problem formulation to use</p>
<p>From our experience, the distributed least-squares formulation works better.</p>
</div>
<h2 id="core-nodes-copy-nodes">Core nodes &amp; copy nodes</h2>
<p>Suppose we have a grid that looks like as follows</p>
<p><img alt="image" src="visualization/original.png" /></p>
<p>There are a total of <span><span class="MathJax_Preview">12</span><script type="math/tex">12</script></span> buses in the system. The dashed lines
indicate the three different regions: buses <span><span class="MathJax_Preview">\{ 1, 2, 3 \}</span><script type="math/tex">\{ 1, 2, 3 \}</script></span> belong to
what we call the master system, buses <span><span class="MathJax_Preview">\{4, 5, 6, 7 \}</span><script type="math/tex">\{4, 5, 6, 7 \}</script></span> belong to what
we call the (first) worker system, and buses <span><span class="MathJax_Preview">\{ 8, 9, 10, 11, 12 \}</span><script type="math/tex">\{ 8, 9, 10, 11, 12 \}</script></span>
belong to the (second) worker system. Hence, we distinguish between
<em>master</em> and <em>worker</em> systems; these local or regional systems (or just
<em>subsystems</em>) make up the overall power system.</p>
<p>For the overall system the power flow problem means to compute the
values</p>
<div>
<div class="MathJax_Preview">\begin{aligned}
    x_i = \begin{bmatrix}
        \theta_i \\
        v_i \\
        p_i \\
        q_i \\
    \end{bmatrix}
    \in \mathbb{R}^{4 n}\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    x_i = \begin{bmatrix}
        \theta_i \\
        v_i \\
        p_i \\
        q_i \\
    \end{bmatrix}
    \in \mathbb{R}^{4 n}\end{aligned}</script>
</div>
<p>for all <span><span class="MathJax_Preview">i \in \{1, \dots, 12 \}</span><script type="math/tex">i \in \{1, \dots, 12 \}</script></span>. A prototypical power flow problem
can be formulated mathematically as a system of nonlinear equations of
the form</p>
<div>
<div class="MathJax_Preview">\begin{aligned}
        g^{\text{pf}}( x) &amp;= 0, \\
        g^{\text{bus}}( x) &amp;= 0,
    \end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
        g^{\text{pf}}( x) &= 0, \\
        g^{\text{bus}}( x) &= 0,
    \end{aligned}</script>
</div>
<p>where <span><span class="MathJax_Preview">g^{\text{pf}}( x) = 0</span><script type="math/tex">g^{\text{pf}}( x) = 0</script></span> constitutes the <span><span class="MathJax_Preview">2 \times 12</span><script type="math/tex">2 \times 12</script></span> power
flow equations, and <span><span class="MathJax_Preview">g^{\text{bus}}( x) = 0</span><script type="math/tex">g^{\text{bus}}( x) = 0</script></span> stands for the remaining
<span><span class="MathJax_Preview">2 \times 12</span><script type="math/tex">2 \times 12</script></span> bus specifications. This yields a total of
<span><span class="MathJax_Preview">4 \times 12</span><script type="math/tex">4 \times 12</script></span> equations for <span><span class="MathJax_Preview">4 \times 12</span><script type="math/tex">4 \times 12</script></span> unknowns. Arguably, this
leads to large systems of nonlinear equations as soon as the number of
buses in the power system increases. From here on we call this
prototypical power flow problem we just described the <em>centralized</em>
power flow problem.</p>
<p>The idea of <em>distributed</em> power flow is to solve <em>local</em> power flow
problems within each system (= the master system, and all of the worker
systems), independent of each other, and iterate for as long as
necessary until the solution of the centralized problem is obtained.
Iteration here means to find consensus on the physical values of the
exchanged power between the subsystems.</p>
<p>Before making this idea mathematically precise we introduce some more
Nomenclature. Suppose we are seated in the master system, the one
composed of buses <span><span class="MathJax_Preview">\{1, 2, 3 \}</span><script type="math/tex">\{1, 2, 3 \}</script></span>. From our perspective both worker
systems are our <em>neighbors</em>. More precisely, we know only that bus <span><span class="MathJax_Preview">4</span><script type="math/tex">4</script></span>
(located in the first worker system) is our connection to the first worker
system. Likewise, bus <span><span class="MathJax_Preview">8</span><script type="math/tex">8</script></span> (located in the second worker system) is our
connection to the second worker system. To distinguish between these
different kinds of buses we call the buses <span><span class="MathJax_Preview">\{1, 2, 3 \}</span><script type="math/tex">\{1, 2, 3 \}</script></span> the <em>core</em>
nodes of the master system, and buses <span><span class="MathJax_Preview">\{ 4, 8\}</span><script type="math/tex">\{ 4, 8\}</script></span> the <em>copy</em> nodes.
Importantly, all other nodes do not exist for us; they are ignored.
Graphically, our world looks as follows.</p>
<p><img alt="image" src="visualization/version_1.png" /></p>
<p>Why the term <em>copy</em>? Because when formulating the power flow equations
for the master system we need to know the voltages at the <em>copy</em> nodes.
And in case we donât know the values (which we really donât because the
copy nodes do not belong to our jurisdiction), then we have to <em>assume</em>
values for them. This can be thought of as copying the buses into the
shaded are denoted as â<span><span class="MathJax_Preview">\text{copy + core nodes}</span><script type="math/tex">\text{copy + core nodes}</script></span>,â hence the name.</p>
<p>Taking on the perspective of the first worker system we see: our core
nodes are <span><span class="MathJax_Preview">\{ 4, 5, 6, 7 \}</span><script type="math/tex">\{ 4, 5, 6, 7 \}</script></span>, and there is just one copy bus <span><span class="MathJax_Preview">1</span><script type="math/tex">1</script></span>,
the first bus in the master system. Our world looks as follows.</p>
<p><img alt="image" src="visualization/version_2.png" /></p>
<p>Being able to distinguish between core nodes and copy nodes allows to
formulate the distributed power flow clearer: <em>solve the power flow
problem in each subsystem and attain consensus between the copy nodes
and their core node equivalents.</em> By core node equivalent we mean the
following: the first copy bus of the master system has bus <span><span class="MathJax_Preview">4</span><script type="math/tex">4</script></span> as its
core node equivalent. It is clear from intuition that if the voltage at
the copy node in each subsystem corresponds to the value of its core
node equivalent, then the solution of the distributed power flow problem
is the same as the solution from the centralized power flow problem.</p>
<p>Let us make these ideas mathematically more precise.</p>
<h2 id="local-power-flow-problem">Local power flow problem</h2>
<p>The following table collects symbols and their meanings as they are used
throughout.</p>
<table>
<thead>
<tr>
<th align="left">Symbol</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><span><span class="MathJax_Preview">n^{\text{reg}}</span><script type="math/tex">n^{\text{reg}}</script></span></td>
<td align="left">Number of regions</td>
</tr>
<tr>
<td align="left"><span><span class="MathJax_Preview">n^{\text{conn}}</span><script type="math/tex">n^{\text{conn}}</script></span></td>
<td align="left">Number of connecting lines between regions</td>
</tr>
<tr>
<td align="left"><span><span class="MathJax_Preview">n^\text{core}_{i}</span><script type="math/tex">n^\text{core}_{i}</script></span></td>
<td align="left">Number of core nodes in region <span><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span></td>
</tr>
<tr>
<td align="left"><span><span class="MathJax_Preview">n^\text{copy}_{i}</span><script type="math/tex">n^\text{copy}_{i}</script></span></td>
<td align="left">Number of copy nodes in region <span><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span></td>
</tr>
<tr>
<td align="left"><span><span class="MathJax_Preview">x_{i}</span><script type="math/tex">x_{i}</script></span></td>
<td align="left">State of core nodes in region <span><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span></td>
</tr>
<tr>
<td align="left"><span><span class="MathJax_Preview">z_{i}</span><script type="math/tex">z_{i}</script></span></td>
<td align="left">State of copy nodes in region <span><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span></td>
</tr>
</tbody>
</table>
<p>We compose the set of buses of each region <span><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span> into a set of <em>core
nodes</em>, and a set of <em>copy nodes</em>. The core nodes are the original nodes
that make up the power system. The copy nodes are the nodes that connect
the power system to the neighboring power systems. Hence, the copy nodes
<em>do not belong to the power system</em> but to its neighbors. The sole
purpose of the copy nodes is to store the complex voltage information at
the neighboring buses such that power flow equations can be constructed.</p>
<p>The state of the core nodes contains the voltage angles, the voltage
magnitudes, the net active power, and the net reactive power of all core
nodes</p>
<div>
<div class="MathJax_Preview">\begin{aligned}
    \label{eq:state-core}
    x_i = \begin{bmatrix}
        \theta_i^\text{core} \\
        v_i^\text{core} \\
        p_i^\text{core} \\
        q_i^\text{core} \\
    \end{bmatrix}
    \in \mathbb{R}^{4 n^\text{core}_i}.\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    \label{eq:state-core}
    x_i = \begin{bmatrix}
        \theta_i^\text{core} \\
        v_i^\text{core} \\
        p_i^\text{core} \\
        q_i^\text{core} \\
    \end{bmatrix}
    \in \mathbb{R}^{4 n^\text{core}_i}.\end{aligned}</script>
</div>
<p>The state of the copy nodes contains the voltage angles and the voltage
magnitudes of all copy nodes</p>
<div>
<div class="MathJax_Preview">\begin{aligned}
    \label{eq:state-copy}
    z_i = \begin{bmatrix}
        \theta_i^\text{copy} \\
        v_i^\text{copy}
    \end{bmatrix}
    \in \mathbb{R}^{2 n^\text{copy}_i}.\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    \label{eq:state-copy}
    z_i = \begin{bmatrix}
        \theta_i^\text{copy} \\
        v_i^\text{copy}
    \end{bmatrix}
    \in \mathbb{R}^{2 n^\text{copy}_i}.\end{aligned}</script>
</div>
<p>We see: each region <span><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span> is described by a total of
<span><span class="MathJax_Preview">4 n^\text{core}_i + 2 n^\text{copy}_i</span><script type="math/tex">4 n^\text{core}_i + 2 n^\text{copy}_i</script></span> real numbers.</p>
<h3 id="power-flow-equations">Power flow equations</h3>
<p>In region <span><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span> we formulate a total of <span><span class="MathJax_Preview">2 n^\text{core}_i</span><script type="math/tex">2 n^\text{core}_i</script></span> power flow
equations
<span><span class="MathJax_Preview">g^{\text{pf}}_i \colon \mathbb{R}^{4 n^\text{core}_i} \times \mathbb{R}^{2 n^\text{copy}_i} \rightarrow \mathbb{R}^{2 n^\text{core}_i}</span><script type="math/tex">g^{\text{pf}}_i \colon \mathbb{R}^{4 n^\text{core}_i} \times \mathbb{R}^{2 n^\text{copy}_i} \rightarrow \mathbb{R}^{2 n^\text{core}_i}</script></span>
for all core nodes</p>
<div>
<div class="MathJax_Preview">\begin{aligned}
    g^{\text{pf}}_i( x_i, z_i) = 0.\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    g^{\text{pf}}_i( x_i, z_i) = 0.\end{aligned}</script>
</div>
<h3 id="bus-specifications">Bus specifications</h3>
<p>In region <span><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span> we formulate a total of <span><span class="MathJax_Preview">2 n^\text{core}_i</span><script type="math/tex">2 n^\text{core}_i</script></span> bus
specifications
<span><span class="MathJax_Preview">g^{\text{bus}}_i \colon \mathbb{R}^{4 n^\text{core}_i} \rightarrow \mathbb{R}^{2 n^\text{core}_i}</span><script type="math/tex">g^{\text{bus}}_i \colon \mathbb{R}^{4 n^\text{core}_i} \rightarrow \mathbb{R}^{2 n^\text{core}_i}</script></span>
for all core nodes</p>
<div>
<div class="MathJax_Preview">\begin{aligned}
    g^{\text{bus}}_i( x_i) = 0.\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    g^{\text{bus}}_i( x_i) = 0.\end{aligned}</script>
</div>
<h3 id="degrees-of-freedom">Degrees of freedom</h3>
<p>Subtracting the number of equations from the number of decision
variables gives us a total of</p>
<div>
<div class="MathJax_Preview">\begin{aligned}
    \underbrace{4 n^\text{core}_i + 2 n^\text{copy}_i}_{\text{Decision variables}} - \underbrace{2 n^\text{core}_i}_{\text{Power flow equations}} - \underbrace{2 n^\text{core}_i}_{\text{Bus specifications}} = \underbrace{2 n^\text{copy}_i}_{\text{Degrees of freedom}}\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    \underbrace{4 n^\text{core}_i + 2 n^\text{copy}_i}_{\text{Decision variables}} - \underbrace{2 n^\text{core}_i}_{\text{Power flow equations}} - \underbrace{2 n^\text{core}_i}_{\text{Bus specifications}} = \underbrace{2 n^\text{copy}_i}_{\text{Degrees of freedom}}\end{aligned}</script>
</div>
<p>degrees of freedom for each regionÂ <span><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>. These degrees of freedom must
be fixed globally by the consensus constraints.</p>
<h2 id="decentralized-power-flow-problem">Decentralized power flow problem</h2>
<div>
<div class="MathJax_Preview">\begin{aligned}
        g^{\text{pf}}_i( x_i, z_i ) &amp;= 0 \\
        g^{\text{bus}}_i ( x_i ) &amp;= 0 \\
        \sum_{i = 1}^{n^{\text{reg}}} A_i \begin{bmatrix}
            x_i \\
            z_i
        \end{bmatrix}
        &amp;= 0,
    \end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
        g^{\text{pf}}_i( x_i, z_i ) &= 0 \\
        g^{\text{bus}}_i ( x_i ) &= 0 \\
        \sum_{i = 1}^{n^{\text{reg}}} A_i \begin{bmatrix}
            x_i \\
            z_i
        \end{bmatrix}
        &= 0,
    \end{aligned}</script>
</div>
<p>where the consensus matrices
<span><span class="MathJax_Preview">A_i \in \mathbb{R}^{4 n^{\text{conn}}\times (4 n^\text{core}_i + 2 n^\text{copy}_i)}</span><script type="math/tex">A_i \in \mathbb{R}^{4 n^{\text{conn}}\times (4 n^\text{core}_i + 2 n^\text{copy}_i)}</script></span>
enforce equality of the voltage angle and the voltage magnitude at the
copy buses and their respective original buses.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../assumptions/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Assumptions
              </div>
            </div>
          </a>
        
        
          <a href="../mfiles/01_generator/create_skeleton_mpc/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                create_skeleton_mpc
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.fd16492e.min.js"></script>
      <script src="../assets/javascripts/bundle.7836ba4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>